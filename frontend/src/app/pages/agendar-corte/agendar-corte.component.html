<mat-sidenav-container class="page-container">
  <mat-sidenav mode="side" opened>
    <app-sidebar></app-sidebar>
  </mat-sidenav>
  <mat-sidenav-content>
    <app-header [titleHeader]="'AGENDAR CORTE – BARBEARIA MILITAR'" [ramal]="''"></app-header>
    <div class="agendar-container">
  <div class="dia-selector">
    <button *ngFor="let d of dias; let i = index" mat-raised-button (click)="selecionarDia(i)" [color]="selectedDayIndex===i ? 'primary' : undefined">
      {{ d.label }}
    </button>
  </div>

  <div class="grade-horarios">
    <button
      *ngFor="let h of horarios"
      mat-raised-button
      (click)="agendar(h)"
      [disabled]="h.status !== 'DISPONIVEL'"
      [ngClass]="{
        disponivel: h.status === 'DISPONIVEL',
        agendadoProprio: h.status === 'AGENDADO' && h.usuarioId,
        agendadoOutro: h.status === 'AGENDADO' && !h.usuarioId,
        indisponivel: h.status === 'INDISPONIVEL'
      }"
    >
      {{ h.hora }} <span *ngIf="h.status === 'AGENDADO' && h.usuarioId"> - Agendado</span>
      <span *ngIf="h.status === 'AGENDADO' && !h.usuarioId"> - Indisponível</span>
    </button>
  </div>

  <div class="meus-agendamentos" *ngIf="meusAgendamentos.length">
    <h3>Meus Agendamentos</h3>
    <mat-list>
      <mat-list-item *ngFor="let ag of meusAgendamentos">
        <span>{{ ag.diaSemana | titlecase }} {{ ag.hora }}</span>
        <button mat-button color="warn" (click)="cancelar(ag)" [disabled]="!podeCancelar(ag)">Cancelar</button>
      </mat-list-item>
    </mat-list>
  </div>

  <div class="regras">
    <p><b>Regras de Uso:</b></p>
    <ul>
      <li>Apenas 1 agendamento a cada 15 dias.</li>
      <li>Cancelamentos podem ser feitos com até 15 minutos de antecedência.</li>
      <li>Oficiais e Graduados possuem agendas distintas.</li>
    </ul>
  </div>
</div>
  </mat-sidenav-content>
</mat-sidenav-container>
